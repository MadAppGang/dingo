package main

// DINGO:GENERATED - This file was generated by the Dingo transpiler

// Test: Nested Swift pattern matching
// Feature: Nested switch expressions and body styles
// Complexity: advanced

// Example 1: Nested switch expressions
func processNested(result Result_Option_int_error) int {
	__match_0 := result
	// DINGO_MATCH_START: result
	switch __match_0.tag {
	case ResultTagOk:
		// DINGO_PATTERN: Ok(inner)
		inner := *__match_0.ok_0
		__match_1 := inner
		// DINGO_MATCH_START: inner
		switch __match_1.tag {
		case OptionTagSome:
			// DINGO_PATTERN: Some(val)
			val := *__match_1.some_0
			return val
		case OptionTagNone:
			// DINGO_PATTERN: None
			return 0
		}
		// DINGO_MATCH_END
	case ResultTagErr:
		// DINGO_PATTERN: Err(e)
		e := __match_0.err_0
		return -1
	}
	// DINGO_MATCH_END
}

// Example 2: Bare statements (no braces)
func simpleMatch(opt Option_int) int {
	__match_2 := opt
	// DINGO_MATCH_START: opt
	switch __match_2.tag {
	case OptionTagSome:
		// DINGO_PATTERN: Some(x)
		x := *__match_2.some_0
		x * 2
	case OptionTagNone:
		// DINGO_PATTERN: None
		0
	}
	// DINGO_MATCH_END
}

// Example 3: Braced bodies
func bracedMatch(opt Option_int) int {
	__match_3 := opt
	// DINGO_MATCH_START: opt
	switch __match_3.tag {
	case OptionTagSome:
		// DINGO_PATTERN: Some(x)
		x := *__match_3.some_0
		{
			var doubled = x * 2
			return doubled
		}
	case OptionTagNone:
		// DINGO_PATTERN: None
		{
			return 0
		}
	}
	// DINGO_MATCH_END
}

// Example 4: Mixed body styles
func mixedBodies(result Result_int_error) string {
	__match_4 := result
	// DINGO_MATCH_START: result
	switch __match_4.tag {
	case ResultTagOk:
		// DINGO_PATTERN: Ok(x)
		x := *__match_4.ok_0
		return "ok"
	case ResultTagErr:
		// DINGO_PATTERN: Err(e)
		e := __match_4.err_0
		{
			var msg = "error: " + e.Error()
			return msg
		}
	}
	// DINGO_MATCH_END
}

// Example 5: Triple-nested switches
func deepNesting(r Result_Result_Option_int_error_error) int {
	__match_5 := r
	// DINGO_MATCH_START: r
	switch __match_5.tag {
	case ResultTagOk:
		// DINGO_PATTERN: Ok(middle)
		middle := *__match_5.ok_0
		__match_6 := middle
		// DINGO_MATCH_START: middle
		switch __match_6.tag {
		case ResultTagOk:
			// DINGO_PATTERN: Ok(inner)
			inner := *__match_6.ok_0
			__match_7 := inner
			// DINGO_MATCH_START: inner
			switch __match_7.tag {
			case OptionTagSome:
				// DINGO_PATTERN: Some(val)
				val := *__match_7.some_0
				return val
			case OptionTagNone:
				// DINGO_PATTERN: None
				return 0
			}
			// DINGO_MATCH_END
		case ResultTagErr:
			// DINGO_PATTERN: Err(e)
			e := __match_6.err_0
			return -1
		}
		// DINGO_MATCH_END
	case ResultTagErr:
		// DINGO_PATTERN: Err(e)
		e := __match_5.err_0
		return -2
	}
	// DINGO_MATCH_END
}
