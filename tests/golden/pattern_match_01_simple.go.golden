package main

import "fmt"

// DINGO:GENERATED - This file was generated by the Dingo transpiler

// Simple pattern matching examples for Result<T,E> and Option<T>

// Example 1: Pattern match on Result<T,E>
func processResult(result Result_int_error) int {
	__match_0 := result
	// DINGO_MATCH_START: result
	switch __match_0.tag {
	case ResultTagOk:
		// DINGO_PATTERN: Ok(value)
		value := *__match_0.ok_0
		value * 2
	case ResultTagErr:
		// DINGO_PATTERN: Err(e)
		e := __match_0.err_0
		0
	}
	// DINGO_MATCH_END
}

// Example 2: Pattern match on Option<T>
func processOption(opt Option_string) string {
	__match_1 := opt
	// DINGO_MATCH_START: opt
	switch __match_1.tag {
	case OptionTagSome:
		// DINGO_PATTERN: Some(s)
		s := *__match_1.some_0
		s
	case OptionTagNone:
		// DINGO_PATTERN: None
		"default"
	}
	// DINGO_MATCH_END
}

// Example 3: Pattern match with wildcard
func handleStatus(status Status) string {
	__match_2 := status
	// DINGO_MATCH_START: status
	switch __match_2.tag {
	case ActiveTag:
		// DINGO_PATTERN: Active
		"running"
	case PendingTag:
		// DINGO_PATTERN: Pending
		"waiting"
	default:
		// DINGO_PATTERN: _
		"unknown"
	}
	// DINGO_MATCH_END
}

// Example 4: Pattern match in assignment context
func doubleIfPresent(opt Option_int) Option_int {
	var result = __match_3 := opt
	// DINGO_MATCH_START: opt
	switch __match_3.tag {
	case OptionTagSome:
		// DINGO_PATTERN: Some(x)
		x := *__match_3.some_0
		Some(x * 2)
	case OptionTagNone:
		// DINGO_PATTERN: None
		None
	}
	// DINGO_MATCH_END
	return result
}

// Example 5: Nested pattern matching
func processNested(result Result_Option_int_error) int {
	__match_4 := result
	// DINGO_MATCH_START: result
	switch __match_4.tag {
	case ResultTagOk:
		// DINGO_PATTERN: Ok(inner)
		inner := *__match_4.ok_0
		__match_5 := inner
		// DINGO_MATCH_START: inner
		switch __match_5.tag {
		case OptionTagSome:
			// DINGO_PATTERN: Some(val)
			val := *__match_5.some_0
			val
		case OptionTagNone:
			// DINGO_PATTERN: None
			0
		}
		// DINGO_MATCH_END
	case ResultTagErr:
		// DINGO_PATTERN: Err(e)
		e := __match_4.err_0
		-1
	}
	// DINGO_MATCH_END
}

// Helper enum for example 3
type Status int

const (
	Active Status = iota
	Pending
	Completed
)
